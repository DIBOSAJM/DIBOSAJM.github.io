<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Recuperar copias de seguridad</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"/><link rel="home" href="index.html" title="KEME Contabilidad"/><link rel="up" href="ch51.html" title="Capítulo 51. Utilidades"/><link rel="prev" href="ch51s07.html" title="Copia de seguridad"/><link rel="next" href="ch51s09.html" title="Verificar base de datos"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Recuperar copias de seguridad</th></tr><tr><td align="left"><a accesskey="p" href="ch51s07.html">Anterior</a> </td><th width="60%" align="center">Capítulo 51. Utilidades</th><td align="right"> <a accesskey="n" href="ch51s09.html">Siguiente</a></td></tr></table><hr/></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title"><a id="idp173"/>Recuperar copias de seguridad</h2></div></div></div>
						
						<p>Para recuperar una copia de seguridad bajo
      <span class="application">PostgreSQL</span>, utilizaremos el programa
      monitor interactivo, <span class="application">psql</span>, que
      ejecutaremos desde la línea de comandos introduciendo <strong class="userinput"><code>psql
      bd</code></strong>, donde <span class="quote">“<span class="quote">bd</span>”</span> será sustituido por el nombre
      verdadero de la base de datos. Una vez dentro de
      <span class="application">psql</span>, y suponiendo que lo ejecutamos desde el
      directorio donde está guardada la copia de seguridad, introduciremos la
      orden <strong class="userinput"><code>\i copia.sql</code></strong>, donde
      <span class="quote">“<span class="quote">copia.sql</span>”</span> será sustituido por el nombre del fichero que creamos para
      realizar la copia de seguridad. Tan sólo necesitaremos pulsar
      <span class="keysym">INTRO</span> y el proceso terminará al cabo de algunos
      segundos, dependiendo del tamaño del fichero. Para salir de
      <span class="application">psql</span>, introduciremos el comando
      <strong class="userinput"><code>\q</code></strong> seguido de <span class="keysym">INTRO</span>.</p>
						<p>Este proceso sería válido para realizar copias de bases de datos
      de contabilidad. Para ello bastaría con crear una nueva base de datos
      con la utilidad externa de <span class="application">Postgres</span> llamada
      <span class="application">createdb</span>; esto lo realizaremos desde la línea
      de comandos introduciendo <strong class="userinput"><code>createdb nuevabd</code></strong>, donde
      <span class="quote">“<span class="quote">nuevabd</span>”</span> sería el nombre de la nueva base de datos.  El
      siguiente paso sería ejecutar el monitor interactivo
      <span class="application">psql</span> en la nueva base de datos y recuperar la
      copia de seguridad de la forma que vimos en el párrafo anterior.</p>
						<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Sugerencia</h3>
								<p>Para conectarnos con <span class="application">psql</span> a una base
	de datos que no esté en nuestro ordenador local, utilizaremos el
	modificador <strong class="userinput"><code>-h nombrehost</code></strong>, donde
	<span class="quote">“<span class="quote">nombrehost</span>”</span> será el host que ejecute el servidor
	<span class="application">Postgres</span> con la base de datos en cuestión.</p>
						</div>
						<p>Si utilizamos <span class="application">MySQL</span>, el proceso será
      parecido, aunque algo diferente; realizaremos todas las operaciones desde
      el programa monitor interactivo <span class="application">mysql</span> al que
      tendremos que acceder con privilegios de superusuario:</p>
						<pre class="screen">
								<code class="prompt">pepe@MORTADELO:~</code>
								<strong class="userinput"><code>mysql -u root</code></strong>
								<code class="computeroutput">Welcome to the MySQL monitor.  Commands end with ; or \g.</code>
								<code class="computeroutput">Your MySQL connection id is 2 to server version: 5.0.18</code>
								<code class="computeroutput">
Type 'help;' or '\h' for help. Type '\c' to clear the buffer.</code>
								<code class="prompt">mysql</code>
								<strong class="userinput"><code>create database ejemplo;</code></strong>
								<code class="computeroutput">Query OK, 1 row affected (0.02 sec)
</code>
								<code class="prompt">mysql</code>
								<strong class="userinput"><code>use ejemplo;</code></strong>
								<code class="computeroutput">Database changed
</code>
								<code class="prompt">mysql</code>
								<strong class="userinput"><code>\. ejemplo_mysql.sql</code></strong>
						</pre>
						<p>Para salir de <span class="application">mysql</span> introduciremos el
      comando <span class="quote">“<span class="quote">\q</span>”</span>
						</p>
				</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td align="left"><a accesskey="p" href="ch51s07.html">Anterior</a> </td><td align="center"><a accesskey="u" href="ch51.html">Subir</a></td><td align="right"> <a accesskey="n" href="ch51s09.html">Siguiente</a></td></tr><tr><td align="left" valign="top">Copia de seguridad </td><td align="center"><a accesskey="h" href="index.html">Inicio</a></td><td align="right" valign="top"> Verificar base de datos</td></tr></table></div></body></html>